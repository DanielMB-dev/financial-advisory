echo "ğŸ” Running pre-commit checks..."

# Run lint-staged (formatting + lint fixes)
npx lint-staged
# npm run format
# npm run lint

# Type check
echo "ğŸ“ Running type check..."
npm run type-check --silent || exit 1

# Run tests with coverage
echo "ğŸ§ª Running tests with coverage..."
npm run test:ci || {
  echo "âŒ Tests or coverage failed. Commit aborted."
  echo "ğŸ’¡ Coverage must meet thresholds:"
  echo "   - Statements: 70%"
  echo "   - Branches: 70%"
  echo "   - Functions: 70%"
  echo "   - Lines: 70%"
  exit 1
}